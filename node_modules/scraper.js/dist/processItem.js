'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = processItem;

var _fp = require('lodash/fp');

var _fp2 = _interopRequireDefault(_fp);

var _debug = require('debug');

var _debug2 = _interopRequireDefault(_debug);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var log = (0, _debug2.default)('scraperjs:processItem');

function processItem(browser, url, fn) {
  log('navigate to ' + url);
  browser.navigate(url);
  log('inject jquery');
  browser.injectJQuery();
  log('run method');
  return browser.runInContextOfJquery(fn).then(_fp2.default.update('queue', _fp2.default.uniqBy('[0]')));
}